<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ðŸ«¦ Swipe ðŸ«¦</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body>
    <h1>ðŸ«¦ Swipe ðŸ«¦</h1>
    <div class="slider">
        {% for photo in photos %}
            <div class="card">
                <img src="{{ photo }}" alt="Photo">
            </div>
        {% endfor %}
    </div>

    <script>
        let current = 0;
        const cards = document.querySelectorAll('.card');
        function showCard(index) {
            cards.forEach((card, i) => {
                card.style.display = i === index ? 'block' : 'none';
            });
        }

        function nextCard() {
            current = (current + 1) % cards.length;
            showCard(current);
        }

        function prevCard() {
            current = (current - 1 + cards.length) % cards.length;
            showCard(current);
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextCard();
            if (e.key === 'ArrowLeft') prevCard();
        });

        document.addEventListener('swiped-left', nextCard);
        document.addEventListener('swiped-right', prevCard);

        function setupSwipe() {
            let touchstartX = 0;
            let touchendX = 0;

            document.addEventListener('touchstart', e => {
                touchstartX = e.changedTouches[0].screenX;
            });

            document.addEventListener('touchend', e => {
                touchendX = e.changedTouches[0].screenX;
                if (touchendX < touchstartX - 50) document.dispatchEvent(new Event('swiped-left'));
                if (touchendX > touchstartX + 50) document.dispatchEvent(new Event('swiped-right'));
            });
        }

        setupSwipe();
        showCard(current);
    </script>
</body>
</html>
